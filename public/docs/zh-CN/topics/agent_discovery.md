# 发现代理卡片

**简述:** 代理需要能够被客户端发现。

<!-- TOC -->

- [发现代理卡片](#发现代理卡片)
  - [为什么代理卡片很重要？](#为什么代理卡片很重要)
  - [发现方法](#发现方法)
    - [公开发现](#公开发现)
    - [私有发现](#私有发现)
  - [代理卡片结构](#代理卡片结构)
  - [语言支持](#语言支持)

<!-- /TOC -->

## 为什么代理卡片很重要？

代理卡片允许代理向其他代理和客户端展示其能力，从而实现围绕特定用户需求进行协作。代理必须公布包含三个核心内容的卡片：

1. **身份验证需求** - 与代理交互所需的安全机制
2. **代理技能** - 代理可以做什么，以及如何最佳地发挥其功能
3. **内容类型** - 代理可以处理的特定数据格式

## 发现方法

提供代理卡片主要有两种发现模式：公开和私有。

### 公开发现

对于互联网可访问的代理，一种常见模式是在代理的基础URL的.well-known目录下提供代理卡片。遵循广泛采用的标准，例如RFC 8615，
我们建议代理在以下位置提供其卡片：

```
https://[base domain]/.well-known/agent.json
```

这种方法允许客户端和其他代理在知道代理的域名的情况下发现代理的能力，无需额外的查找步骤。还支持简单的URL构造，因为代理卡
片的位置遵循标准化格式。

### 私有发现

对于私有或企业环境，可能会采用不同的发现机制：

1. **代理目录服务** - 提供可搜索的代理数据库，这些代理已经通过企业身份验证/授权控制。
2. **带外交换** - 通过API密钥、IAM角色或其他身份验证机制注册和交换代理卡片。
3. **管理的代理市场** - 由组织管理员配置的内部企业市场，含有批准的代理服务。

企业环境倾向于将发现与授权绑定，确保代理只能被授权实体访问。

## 代理卡片结构

代理卡片是一个JSON文档，描述了代理提供的能力和技能，以及如何安全地与代理交互。完整的代理卡片规范
在[文档](/zh-CN/documentation.md#表示)中详细说明。

最低限度，代理卡片必须包含名称、描述、URL和支持的技能列表。每个技能有自己的ID、名称和描述，以及可选的标签和示例，帮助客
户端评估技能的最佳使用方式。

## 语言支持

**国际化和本地化**

为了支持国际客户端，代理卡片可能提供多种语言版本：

1. **通过内容协商发现** - 客户端可以在发现请求中包含Accept-Language头，代理可以根据这一点返回本地化的卡片。
2. **嵌入式翻译** - 代理卡片本身可以包含各种字段的翻译。
3. **独立本地化端点** - 代理可能在`/.well-known/agent.{locale}.json`提供本地化版本。

代理应指明支持哪些内容类型来与多语言用户有效交互。
